/*! PhotoSwipe - v4.1.2 - 2018-07-23
* http://photoswipe.com
* Copyright (c) 2018 Dmitry Semenov; */
!function(a,b){"function"==typeof define&&define.amd?define(b):"object"==typeof exports?module.exports=b():a.PhotoSwipe=b()}(this,function(){"use strict";var a=function(a,b,c,d){var e={features:null,bind:function(a,b,c,d){var e=(d?"remove":"add")+"EventListener";b=b.split(" ");for(var f=0;f<b.length;f++)b[f]&&a[e](b[f],c,!1)},isArray:function(a){return a instanceof Array},createEl:function(a,b){var c=document.createElement(b||"div");return a&&(c.className=a),c},getScrollY:function(){var a=window.pageYOffset;return void 0!==a?a:document.documentElement.scrollTop},unbind:function(a,b,c){e.bind(a,b,c,!0)},removeClass:function(a,b){var c=new RegExp("(\\s|^)"+b+"(\\s|$)");a.className=a.className.replace(c," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")},addClass:function(a,b){e.hasClass(a,b)||(a.className+=(a.className?" ":"")+b)},hasClass:function(a,b){return a.className&&new RegExp("(^|\\s)"+b+"(\\s|$)").test(a.className)},getChildByClass:function(a,b){for(var c=a.firstChild;c;){if(e.hasClass(c,b))return c;c=c.nextSibling}},arraySearch:function(a,b,c){for(var d=a.length;d--;)if(a[d][c]===b)return d;return-1},extend:function(a,b,c){for(var d in b)if(b.hasOwnProperty(d)){if(c&&a.hasOwnProperty(d))continue;a[d]=b[d]}},easing:{sine:{out:function(a){return Math.sin(a*(Math.PI/2))},inOut:function(a){return-(Math.cos(Math.PI*a)-1)/2}},cubic:{out:function(a){return--a*a*a+1}}},detectFeatures:function(){if(e.features)return e.features;var a=e.createEl(),b=a.style,c="",d={};if(d.oldIE=document.all&&!document.addEventListener,d.touch="ontouchstart"in window,window.requestAnimationFrame&&(d.raf=window.requestAnimationFrame,d.caf=window.cancelAnimationFrame),d.pointerEvent=navigator.pointerEnabled||navigator.msPointerEnabled,!d.pointerEvent){var f=navigator.userAgent;if(/iP(hone|od)/.test(navigator.platform)){var g=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);g&&g.length>0&&(g=parseInt(g[1],10),g>=1&&g<8&&(d.isOldIOSPhone=!0))}var h=f.match(/Android\s([0-9\.]*)/),i=h?h[1]:0;i=parseFloat(i),i>=1&&(i<4.4&&(d.isOldAndroid=!0),d.androidVersion=i),d.isMobileOpera=/opera mini|opera mobi/i.test(f)}for(var j,k,l=["transform","perspective","animationName"],m=["","webkit","Moz","ms","O"],n=0;n<4;n++){c=m[n];for(var o=0;o<3;o++)j=l[o],k=c+(c?j.charAt(0).toUpperCase()+j.slice(1):j),!d[j]&&k in b&&(d[j]=k);c&&!d.raf&&(c=c.toLowerCase(),d.raf=window[c+"RequestAnimationFrame"],d.raf&&(d.caf=window[c+"CancelAnimationFrame"]||window[c+"CancelRequestAnimationFrame"]))}if(!d.raf){var p=0;d.raf=function(a){var b=(new Date).getTime(),c=Math.max(0,16-(b-p)),d=window.setTimeout(function(){a(b+c)},c);return p=b+c,d},d.caf=function(a){clearTimeout(a)}}return d.svg=!!document.createElementNS&&!!document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect,e.features=d,d}};e.detectFeatures(),e.features.oldIE&&(e.bind=function(a,b,c,d){b=b.split(" ");for(var e,f=(d?"detach":"attach")+"Event",g=function(){c.handleEvent.call(c)},h=0;h<b.length;h++)if(e=b[h])if("object"==typeof c&&c.handleEvent){if(d){if(!c["oldIE"+e])return!1}else c["oldIE"+e]=g;a[f]("on"+e,c["oldIE"+e])}else a[f]("on"+e,c)});var f=this,g=25,h=3,j={allowPanToNext:!0,spacing:.12,bgOpacity:1,mouseUsed:!1,loop:!0,pinchToClose:!0,closeOnScroll:!0,closeOnVerticalDrag:!0,verticalDragRange:.75,hideAnimationDuration:333,showAnimationDuration:333,showHideOpacity:!1,focus:!0,escKey:!0,arrowKeys:!0,mainScrollEndFriction:.35,panEndFriction:.35,isClickableElement:function(a){return"A"===a.tagName},getDoubleTapZoom:function(a,b){return a?1:b.initialZoomLevel<.7?1:1.33},maxSpreadZoom:1.33,modal:!0,scaleMode:"fit"};e.extend(j,d);var k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,$,_,aa,ba,ca,da,ea,fa,ga,ha,ia,ja,ka,la,ma,na=function(){return{x:0,y:0}},oa=na(),pa=na(),qa=na(),ra={},sa=0,ta={},ua=na(),va=0,wa=!0,xa=[],ya={},za=!1,Aa=function(a,b){e.extend(f,b.publicMethods),xa.push(a)},Ba=function(a){var b=bc();return a>b-1?a-b:a<0?b+a:a},Ca={},Da=function(a,b){return Ca[a]||(Ca[a]=[]),Ca[a].push(b)},Ea=function(a){var b=Ca[a];if(b){var c=Array.prototype.slice.call(arguments);c.shift();for(var d=0;d<b.length;d++)b[d].apply(f,c)}},Fa=function(){return(new Date).getTime()},Ga=function(a){ka=a,f.bg.style.opacity=a*j.bgOpacity},Ha=function(a,b,c,d,e){(!za||e&&e!==f.currItem)&&(d/=e?e.fitRatio:f.currItem.fitRatio),a[F]=v+b+"px, "+c+"px"+w+" scale("+d+")"},Ia=function(a){fa&&(a&&(t>f.currItem.fitRatio?za||(nc(f.currItem,!1,!0),za=!0):za&&(nc(f.currItem),za=!1)),Ha(fa,qa.x,qa.y,t))},Ja=function(a){a.container&&Ha(a.container.style,a.initialPosition.x,a.initialPosition.y,a.initialZoomLevel,a)},Ka=function(a,b){b[F]=v+a+"px, 0px"+w},La=function(a,b){if(!j.loop&&b){var c=n+(ua.x*sa-a)/ua.x,d=Math.round(a-ub.x);(c<0&&d>0||c>=bc()-1&&d<0)&&(a=ub.x+d*j.mainScrollEndFriction)}ub.x=a,Ka(a,o)},Ma=function(a,b){var c=vb[a]-ta[a];return pa[a]+oa[a]+c-c*(b/u)},Na=function(a,b){a.x=b.x,a.y=b.y,b.id&&(a.id=b.id)},Oa=function(a){a.x=Math.round(a.x),a.y=Math.round(a.y)},Pa=null,Qa=function(){Pa&&(e.unbind(document,"mousemove",Qa),e.addClass(a,"pswp--has_mouse"),j.mouseUsed=!0,Ea("mouseUsed")),Pa=setTimeout(function(){Pa=null},100)},Ra=function(){e.bind(document,"keydown",f),O.transform&&e.bind(f.scrollWrap,"click",f),j.mouseUsed||e.bind(document,"mousemove",Qa),e.bind(window,"resize scroll orientationchange",f),Ea("bindEvents")},Sa=function(){e.unbind(window,"resize scroll orientationchange",f),e.unbind(window,"scroll",s.scroll),e.unbind(document,"keydown",f),e.unbind(document,"mousemove",Qa),O.transform&&e.unbind(f.scrollWrap,"click",f),W&&e.unbind(window,q,f),clearTimeout(P),Ea("unbindEvents")},Ta=function(a,b){var c=jc(f.currItem,ra,a);return b&&(ea=c),c},Ua=function(a){return a||(a=f.currItem),a.initialZoomLevel},Va=function(a){return a||(a=f.currItem),a.w>0?j.maxSpreadZoom:1},Wa=function(a,b,c,d){return d===f.currItem.initialZoomLevel?(c[a]=f.currItem.initialPosition[a],!0):(c[a]=Ma(a,d),c[a]>b.min[a]?(c[a]=b.min[a],!0):c[a]<b.max[a]&&(c[a]=b.max[a],!0))},Xa=function(){if(F){var b=O.perspective&&!H;return v="translate"+(b?"3d(":"("),void(w=O.perspective?", 0px)":")")}F="left",e.addClass(a,"pswp--ie"),Ka=function(a,b){b.left=a+"px"},Ja=function(a){var b=a.fitRatio>1?1:a.fitRatio,c=a.container.style,d=b*a.w,e=b*a.h;c.width=d+"px",c.height=e+"px",c.left=a.initialPosition.x+"px",c.top=a.initialPosition.y+"px"},Ia=function(){if(fa){var a=fa,b=f.currItem,c=b.fitRatio>1?1:b.fitRatio,d=c*b.w,e=c*b.h;a.width=d+"px",a.height=e+"px",a.left=qa.x+"px",a.top=qa.y+"px"}}},Ya=function(a){var b="";j.escKey&&27===a.keyCode?b="close":j.arrowKeys&&(37===a.keyCode?b="prev":39===a.keyCode&&(b="next")),b&&(a.ctrlKey||a.altKey||a.shiftKey||a.metaKey||(a.preventDefault?a.preventDefault():a.returnValue=!1,f[b]()))},Za=function(a){a&&(Z||Y||ga||U)&&(a.preventDefault(),a.stopPropagation())},$a=function(){f.setScrollOffset(0,e.getScrollY())},_a={},ab=0,bb=function(a){_a[a]&&(_a[a].raf&&J(_a[a].raf),ab--,delete _a[a])},cb=function(a){_a[a]&&bb(a),_a[a]||(ab++,_a[a]={})},db=function(){for(var a in _a)_a.hasOwnProperty(a)&&bb(a)},eb=function(a,b,c,d,e,f,g){var h,i=Fa();cb(a);var j=function(){if(_a[a]){if(h=Fa()-i,h>=d)return bb(a),f(c),void(g&&g());f((c-b)*e(h/d)+b),_a[a].raf=I(j)}};j()},fb={shout:Ea,listen:Da,viewportSize:ra,options:j,isMainScrollAnimating:function(){return ga},getZoomLevel:function(){return t},getCurrentIndex:function(){return n},isDragging:function(){return W},isZooming:function(){return ba},setScrollOffset:function(a,b){ta.x=a,N=ta.y=b,Ea("updateScrollOffset",ta)},applyZoomPan:function(a,b,c,d){qa.x=b,qa.y=c,t=a,Ia(d)},init:function(){if(!k&&!l){var c;f.framework=e,f.template=a,f.bg=e.getChildByClass(a,"pswp__bg"),K=a.className,k=!0,O=e.detectFeatures(),I=O.raf,J=O.caf,F=O.transform,M=O.oldIE,f.scrollWrap=e.getChildByClass(a,"pswp__scroll-wrap"),f.container=e.getChildByClass(f.scrollWrap,"pswp__container"),o=f.container.style,f.itemHolders=z=[{el:f.container.children[0],wrap:0,index:-1},{el:f.container.children[1],wrap:0,index:-1},{el:f.container.children[2],wrap:0,index:-1}],z[0].el.style.display=z[2].el.style.display="none",Xa(),s={resize:f.updateSize,orientationchange:function(){clearTimeout(P),P=setTimeout(function(){ra.x!==f.scrollWrap.clientWidth&&f.updateSize()},500)},scroll:$a,keydown:Ya,click:Za};var d=O.isOldIOSPhone||O.isOldAndroid||O.isMobileOpera;for(O.animationName&&O.transform&&!d||(j.showAnimationDuration=j.hideAnimationDuration=0),c=0;c<xa.length;c++)f["init"+xa[c]]();if(b){var g=f.ui=new b(f,e);g.init()}Ea("firstUpdate"),n=n||j.index||0,(isNaN(n)||n<0||n>=bc())&&(n=0),f.currItem=ac(n),(O.isOldIOSPhone||O.isOldAndroid)&&(wa=!1),a.setAttribute("aria-hidden","false"),j.modal&&(wa?a.style.position="fixed":(a.style.position="absolute",a.style.top=e.getScrollY()+"px")),void 0===N&&(Ea("initialLayout"),N=L=e.getScrollY());var i="pswp--open ";for(j.mainClass&&(i+=j.mainClass+" "),j.showHideOpacity&&(i+="pswp--animate_opacity "),i+=H?"pswp--touch":"pswp--notouch",i+=O.animationName?" pswp--css_animation":"",i+=O.svg?" pswp--svg":"",e.addClass(a,i),f.updateSize(),p=-1,va=null,c=0;c<h;c++)Ka((c+p)*ua.x,z[c].el.style);M||e.bind(f.scrollWrap,r,f),Da("initialZoomInEnd",function(){f.setContent(z[0],n-1),f.setContent(z[2],n+1),z[0].el.style.display=z[2].el.style.display="block",j.focus&&a.focus(),Ra()}),f.setContent(z[1],n),f.updateCurrItem(),Ea("afterInit"),wa||(x=setInterval(function(){ab||W||ba||t!==f.currItem.initialZoomLevel||f.updateSize()},1e3)),e.addClass(a,"pswp--visible")}},close:function(){k&&(k=!1,l=!0,Ea("close"),Sa(),dc(f.currItem,null,!0,f.destroy))},destroy:function(){Ea("destroy"),Yb&&clearTimeout(Yb),a.setAttribute("aria-hidden","true"),a.className=K,x&&clearInterval(x),e.unbind(f.scrollWrap,r,f),e.unbind(window,"scroll",f),Ab(),db(),Ca=null},panTo:function(a,b,c){c||(a>ea.min.x?a=ea.min.x:a<ea.max.x&&(a=ea.max.x),b>ea.min.y?b=ea.min.y:b<ea.max.y&&(b=ea.max.y)),qa.x=a,qa.y=b,Ia()},handleEvent:function(a){a=a||window.event,s[a.type]&&s[a.type](a)},goTo:function(a){a=Ba(a);var b=a-n;va=b,n=a,f.currItem=ac(n),sa-=b,La(ua.x*sa),db(),ga=!1,f.updateCurrItem()},next:function(){f.goTo(n+1)},prev:function(){f.goTo(n-1)},updateCurrZoomItem:function(a){if(a&&Ea("beforeChange",0),z[1].el.children.length){var b=z[1].el.children[0];fa=e.hasClass(b,"pswp__zoom-wrap")?b.style:null}else fa=null;ea=f.currItem.bounds,u=t=f.currItem.initialZoomLevel,qa.x=ea.center.x,qa.y=ea.center.y,a&&Ea("afterChange")},invalidateCurrItems:function(){y=!0;for(var a=0;a<h;a++)z[a].item&&(z[a].item.needsUpdate=!0)},updateCurrItem:function(a){if(0!==va){var b,c=Math.abs(va);if(!(a&&c<2)){f.currItem=ac(n),za=!1,Ea("beforeChange",va),c>=h&&(p+=va+(va>0?-h:h),c=h);for(var d=0;d<c;d++)va>0?(b=z.shift(),z[h-1]=b,p++,Ka((p+2)*ua.x,b.el.style),f.setContent(b,n-c+d+1+1)):(b=z.pop(),z.unshift(b),p--,Ka(p*ua.x,b.el.style),f.setContent(b,n+c-d-1-1));if(fa&&1===Math.abs(va)){var e=ac(A);e.initialZoomLevel!==t&&(jc(e,ra),nc(e),Ja(e))}va=0,f.updateCurrZoomItem(),A=n,Ea("afterChange")}}},updateSize:function(b){if(!wa&&j.modal){var c=e.getScrollY();if(N!==c&&(a.style.top=c+"px",N=c),!b&&ya.x===window.innerWidth&&ya.y===window.innerHeight)return;ya.x=window.innerWidth,ya.y=window.innerHeight,a.style.height=ya.y+"px"}if(ra.x=f.scrollWrap.clientWidth,ra.y=f.scrollWrap.clientHeight,$a(),ua.x=ra.x+Math.round(ra.x*j.spacing),ua.y=ra.y,La(ua.x*sa),Ea("beforeResize"),void 0!==p){for(var d,g,i,k=0;k<h;k++)d=z[k],Ka((k+p)*ua.x,d.el.style),i=n+k-1,j.loop&&bc()>2&&(i=Ba(i)),g=ac(i),g&&(y||g.needsUpdate||!g.bounds)?(f.cleanSlide(g),f.setContent(d,i),1===k&&(f.currItem=g,f.updateCurrZoomItem(!0)),g.needsUpdate=!1):d.index===-1&&i>=0&&f.setContent(d,i),g&&g.container&&(jc(g,ra),nc(g),Ja(g));y=!1}u=t=f.currItem.initialZoomLevel,ea=f.currItem.bounds,ea&&(qa.x=ea.center.x,qa.y=ea.center.y,Ia(!0)),Ea("resize")},zoomTo:function(a,b,c,d,f){b&&(u=t,vb.x=Math.abs(b.x)-qa.x,vb.y=Math.abs(b.y)-qa.y,Na(pa,qa));var g=Ta(a,!1),h={};Wa("x",g,h,a),Wa("y",g,h,a);var i=t,j={x:qa.x,y:qa.y};Oa(h);var k=function(b){1===b?(t=a,qa.x=h.x,qa.y=h.y):(t=(a-i)*b+i,qa.x=(h.x-j.x)*b+j.x,qa.y=(h.y-j.y)*b+j.y),f&&f(b),Ia(1===b)};c?eb("customZoomTo",0,1,c,d||e.easing.sine.inOut,k):k(1)}},gb=30,hb=10,ib={},jb={},kb={},lb={},mb={},nb=[],ob={},pb=[],qb={},rb=0,sb=na(),tb=0,ub=na(),vb=na(),wb=na(),xb=function(a,b){return a.x===b.x&&a.y===b.y},yb=function(a,b){return Math.abs(a.x-b.x)<g&&Math.abs(a.y-b.y)<g},zb=function(a,b){return qb.x=Math.abs(a.x-b.x),qb.y=Math.abs(a.y-b.y),Math.sqrt(qb.x*qb.x+qb.y*qb.y)},Ab=function(){$&&(J($),$=null)},Bb=function(){W&&($=I(Bb),Rb())},Cb=function(){return!("fit"===j.scaleMode&&t===f.currItem.initialZoomLevel)},Db=function(a,b){return!(!a||a===document)&&(!(a.getAttribute("class")&&a.getAttribute("class").indexOf("pswp__scroll-wrap")>-1)&&(b(a)?a:Db(a.parentNode,b)))},Eb={},Fb=function(a,b){return Eb.prevent=!Db(a.target,j.isClickableElement),Ea("preventDragEvent",a,b,Eb),Eb.prevent},Gb=function(a,b){return b.x=a.pageX,b.y=a.pageY,b.id=a.identifier,b},Hb=function(a,b,c){c.x=.5*(a.x+b.x),c.y=.5*(a.y+b.y)},Ib=function(a,b,c){if(a-R>50){var d=pb.length>2?pb.shift():{};d.x=b,d.y=c,pb.push(d),R=a}},Jb=function(){var a=qa.y-f.currItem.initialPosition.y;return 1-Math.abs(a/(ra.y/2))},Kb={},Lb={},Mb=[],Nb=function(a){for(;Mb.length>0;)Mb.pop();return G?(ma=0,nb.forEach(function(a){0===ma?Mb[0]=a:1===ma&&(Mb[1]=a),ma++})):a.type.indexOf("touch")>-1?a.touches&&a.touches.length>0&&(Mb[0]=Gb(a.touches[0],Kb),a.touches.length>1&&(Mb[1]=Gb(a.touches[1],Lb))):(Kb.x=a.pageX,Kb.y=a.pageY,Kb.id="",Mb[0]=Kb),Mb},Ob=function(a,b){var c,d,e,g,h=0,i=qa[a]+b[a],k=b[a]>0,l=ub.x+b.x,m=ub.x-ob.x;return c=i>ea.min[a]||i<ea.max[a]?j.panEndFriction:1,i=qa[a]+b[a]*c,!j.allowPanToNext&&t!==f.currItem.initialZoomLevel||(fa?"h"!==ha||"x"!==a||Y||(k?(i>ea.min[a]&&(c=j.panEndFriction,h=ea.min[a]-i,d=ea.min[a]-pa[a]),(d<=0||m<0)&&bc()>1?(g=l,m<0&&l>ob.x&&(g=ob.x)):ea.min.x!==ea.max.x&&(e=i)):(i<ea.max[a]&&(c=j.panEndFriction,h=i-ea.max[a],d=pa[a]-ea.max[a]),(d<=0||m>0)&&bc()>1?(g=l,m>0&&l<ob.x&&(g=ob.x)):ea.min.x!==ea.max.x&&(e=i))):g=l,"x"!==a)?void(ga||_||t>f.currItem.fitRatio&&(qa[a]+=b[a]*c)):(void 0!==g&&(La(g,!0),_=g!==ob.x),ea.min.x!==ea.max.x&&(void 0!==e?qa.x=e:_||(qa.x+=b.x*c)),void 0!==g)},Pb=function(a){if(!("mousedown"===a.type&&a.button>0)){if(_b)return void a.preventDefault();if(!V||"mousedown"!==a.type){if(Fb(a,!0)&&a.preventDefault(),Ea("pointerDown"),G){var b=e.arraySearch(nb,a.pointerId,"id");b<0&&(b=nb.length),nb[b]={x:a.pageX,y:a.pageY,id:a.pointerId}}var c=Nb(a),d=c.length;aa=null,db(),W&&1!==d||(W=ia=!0,e.bind(window,q,f),T=la=ja=U=_=Z=X=Y=!1,ha=null,Ea("firstTouchStart",c),Na(pa,qa),oa.x=oa.y=0,Na(lb,c[0]),Na(mb,lb),ob.x=ua.x*sa,pb=[{x:lb.x,y:lb.y}],R=Q=Fa(),Ta(t,!0),Ab(),Bb()),!ba&&d>1&&!ga&&!_&&(u=t,Y=!1,ba=X=!0,oa.y=oa.x=0,Na(pa,qa),Na(ib,c[0]),Na(jb,c[1]),Hb(ib,jb,wb),vb.x=Math.abs(wb.x)-qa.x,vb.y=Math.abs(wb.y)-qa.y,ca=da=zb(ib,jb))}}},Qb=function(a){if(a.preventDefault(),G){var b=e.arraySearch(nb,a.pointerId,"id");if(b>-1){var c=nb[b];c.x=a.pageX,c.y=a.pageY}}if(W){var d=Nb(a);if(ha||Z||ba)aa=d;else if(ub.x!==ua.x*sa)ha="h";else{var f=Math.abs(d[0].x-lb.x)-Math.abs(d[0].y-lb.y);Math.abs(f)>=hb&&(ha=f>0?"h":"v",aa=d)}}},Rb=function(){if(aa){var a=aa.length;if(0!==a)if(Na(ib,aa[0]),kb.x=ib.x-lb.x,kb.y=ib.y-lb.y,ba&&a>1){if(lb.x=ib.x,lb.y=ib.y,!kb.x&&!kb.y&&xb(aa[1],jb))return;Na(jb,aa[1]),Y||(Y=!0,Ea("zoomGestureStarted"));var b=zb(ib,jb),c=Wb(b);c>f.currItem.initialZoomLevel+f.currItem.initialZoomLevel/15&&(la=!0);var d=1,e=Ua(),g=Va();if(c<e)if(j.pinchToClose&&!la&&u<=f.currItem.initialZoomLevel){var h=e-c,i=1-h/(e/1.2);Ga(i),Ea("onPinchClose",i),ja=!0}else d=(e-c)/e,d>1&&(d=1),c=e-d*(e/3);else c>g&&(d=(c-g)/(6*e),d>1&&(d=1),c=g+d*e);d<0&&(d=0),ca=b,Hb(ib,jb,sb),oa.x+=sb.x-wb.x,oa.y+=sb.y-wb.y,Na(wb,sb),qa.x=Ma("x",c),qa.y=Ma("y",c),T=c>t,t=c,Ia()}else{if(!ha)return;if(ia&&(ia=!1,Math.abs(kb.x)>=hb&&(kb.x-=aa[0].x-mb.x),Math.abs(kb.y)>=hb&&(kb.y-=aa[0].y-mb.y)),lb.x=ib.x,lb.y=ib.y,0===kb.x&&0===kb.y)return;if("v"===ha&&j.closeOnVerticalDrag&&!Cb()){oa.y+=kb.y,qa.y+=kb.y;var k=Jb();return U=!0,Ea("onVerticalDrag",k),Ga(k),void Ia()}Ib(Fa(),ib.x,ib.y),Z=!0,ea=f.currItem.bounds;var l=Ob("x",kb);l||(Ob("y",kb),Oa(qa),Ia())}}},Sb=function(a){if(O.isOldAndroid){if(V&&"mouseup"===a.type)return;a.type.indexOf("touch")>-1&&(clearTimeout(V),V=setTimeout(function(){V=0},600))}Ea("pointerUp"),Fb(a,!1)&&a.preventDefault();var b;if(G){var c=e.arraySearch(nb,a.pointerId,"id");if(c>-1)if(b=nb.splice(c,1)[0],navigator.pointerEnabled)b.type=a.pointerType||"mouse";else{var d={4:"mouse",2:"touch",3:"pen"};b.type=d[a.pointerType],b.type||(b.type=a.pointerType||"mouse")}}var g,h=Nb(a),i=h.length;if("mouseup"===a.type&&(i=0),2===i)return aa=null,!0;1===i&&Na(mb,h[0]),0!==i||ha||ga||(b||("mouseup"===a.type?b={x:a.pageX,y:a.pageY,type:"mouse"}:a.changedTouches&&a.changedTouches[0]&&(b={x:a.changedTouches[0].pageX,y:a.changedTouches[0].pageY,type:"touch"})),Ea("touchRelease",a,b));var k=-1;if(0===i&&(W=!1,e.unbind(window,q,f),Ab(),ba?k=0:tb!==-1&&(k=Fa()-tb)),tb=1===i?Fa():-1,g=k!==-1&&k<150?"zoom":"swipe",ba&&i<2&&(ba=!1,1===i&&(g="zoomPointerUp"),Ea("zoomGestureEnded")),aa=null,Z||Y||ga||U)if(db(),S||(S=Tb()),S.calculateSwipeSpeed("x"),U){var l=Jb();if(l<j.verticalDragRange)f.close();else{var m=qa.y,n=ka;eb("verticalDrag",0,1,300,e.easing.cubic.out,function(a){qa.y=(f.currItem.initialPosition.y-m)*a+m,Ga((1-n)*a+n),Ia()}),Ea("onVerticalDrag",1)}}else{if((_||ga)&&0===i){var o=Vb(g,S);if(o)return;g="zoomPointerUp"}if(!ga)return"swipe"!==g?void Xb():void(!_&&t>f.currItem.fitRatio&&Ub(S))}},Tb=function(){var a,b,c={lastFlickOffset:{},lastFlickDist:{},lastFlickSpeed:{},slowDownRatio:{},slowDownRatioReverse:{},speedDecelerationRatio:{},speedDecelerationRatioAbs:{},distanceOffset:{},backAnimDestination:{},backAnimStarted:{},calculateSwipeSpeed:function(d){pb.length>1?(a=Fa()-R+50,b=pb[pb.length-2][d]):(a=Fa()-Q,b=mb[d]),c.lastFlickOffset[d]=lb[d]-b,c.lastFlickDist[d]=Math.abs(c.lastFlickOffset[d]),c.lastFlickDist[d]>20?c.lastFlickSpeed[d]=c.lastFlickOffset[d]/a:c.lastFlickSpeed[d]=0,Math.abs(c.lastFlickSpeed[d])<.1&&(c.lastFlickSpeed[d]=0),c.slowDownRatio[d]=.95,c.slowDownRatioReverse[d]=1-c.slowDownRatio[d],c.speedDecelerationRatio[d]=1},calculateOverBoundsAnimOffset:function(a,b){c.backAnimStarted[a]||(qa[a]>ea.min[a]?c.backAnimDestination[a]=ea.min[a]:qa[a]<ea.max[a]&&(c.backAnimDestination[a]=ea.max[a]),void 0!==c.backAnimDestination[a]&&(c.slowDownRatio[a]=.7,c.slowDownRatioReverse[a]=1-c.slowDownRatio[a],c.speedDecelerationRatioAbs[a]<.05&&(c.lastFlickSpeed[a]=0,c.backAnimStarted[a]=!0,eb("bounceZoomPan"+a,qa[a],c.backAnimDestination[a],b||300,e.easing.sine.out,function(b){qa[a]=b,Ia()}))))},calculateAnimOffset:function(a){c.backAnimStarted[a]||(c.speedDecelerationRatio[a]=c.speedDecelerationRatio[a]*(c.slowDownRatio[a]+c.slowDownRatioReverse[a]-c.slowDownRatioReverse[a]*c.timeDiff/10),c.speedDecelerationRatioAbs[a]=Math.abs(c.lastFlickSpeed[a]*c.speedDecelerationRatio[a]),c.distanceOffset[a]=c.lastFlickSpeed[a]*c.speedDecelerationRatio[a]*c.timeDiff,qa[a]+=c.distanceOffset[a])},panAnimLoop:function(){if(_a.zoomPan&&(_a.zoomPan.raf=I(c.panAnimLoop),c.now=Fa(),c.timeDiff=c.now-c.lastNow,c.lastNow=c.now,c.calculateAnimOffset("x"),c.calculateAnimOffset("y"),Ia(),c.calculateOverBoundsAnimOffset("x"),c.calculateOverBoundsAnimOffset("y"),c.speedDecelerationRatioAbs.x<.05&&c.speedDecelerationRatioAbs.y<.05))return qa.x=Math.round(qa.x),qa.y=Math.round(qa.y),Ia(),void bb("zoomPan")}};return c},Ub=function(a){return a.calculateSwipeSpeed("y"),ea=f.currItem.bounds,a.backAnimDestination={},a.backAnimStarted={},Math.abs(a.lastFlickSpeed.x)<=.05&&Math.abs(a.lastFlickSpeed.y)<=.05?(a.speedDecelerationRatioAbs.x=a.speedDecelerationRatioAbs.y=0,a.calculateOverBoundsAnimOffset("x"),a.calculateOverBoundsAnimOffset("y"),!0):(cb("zoomPan"),a.lastNow=Fa(),void a.panAnimLoop())},Vb=function(a,b){var c;ga||(rb=n);var d;if("swipe"===a){var g=lb.x-mb.x,h=b.lastFlickDist.x<10;g>gb&&(h||b.lastFlickOffset.x>20)?d=-1:g<-gb&&(h||b.lastFlickOffset.x<-20)&&(d=1)}var i;d&&(n+=d,n<0?(n=j.loop?bc()-1:0,i=!0):n>=bc()&&(n=j.loop?0:bc()-1,i=!0),i&&!j.loop||(va+=d,sa-=d,c=!0));var k,l=ua.x*sa,m=Math.abs(l-ub.x);return c||l>ub.x==b.lastFlickSpeed.x>0?(k=Math.abs(b.lastFlickSpeed.x)>0?m/Math.abs(b.lastFlickSpeed.x):333,k=Math.min(k,400),k=Math.max(k,250)):k=333,rb===n&&(c=!1),ga=!0,Ea("mainScrollAnimStart"),eb("mainScroll",ub.x,l,k,e.easing.cubic.out,La,function(){db(),ga=!1,rb=-1,(c||rb!==n)&&f.updateCurrItem(),Ea("mainScrollAnimComplete")}),c&&f.updateCurrItem(!0),c},Wb=function(a){return 1/da*a*u},Xb=function(){var a=t,b=Ua(),c=Va();t<b?a=b:t>c&&(a=c);var d,g=1,h=ka;return ja&&!T&&!la&&t<b?(f.close(),!0):(ja&&(d=function(a){Ga((g-h)*a+h)}),f.zoomTo(a,0,200,e.easing.cubic.out,d),!0)};Aa("Gestures",{publicMethods:{initGestures:function(){var a=function(a,b,c,d,e){B=a+b,C=a+c,D=a+d,E=e?a+e:""};G=O.pointerEvent,G&&O.touch&&(O.touch=!1),G?navigator.pointerEnabled?a("pointer","down","move","up","cancel"):a("MSPointer","Down","Move","Up","Cancel"):O.touch?(a("touch","start","move","end","cancel"),H=!0):a("mouse","down","move","up"),q=C+" "+D+" "+E,r=B,G&&!H&&(H=navigator.maxTouchPoints>1||navigator.msMaxTouchPoints>1),f.likelyTouchDevice=H,s[B]=Pb,s[C]=Qb,s[D]=Sb,E&&(s[E]=s[D]),O.touch&&(r+=" mousedown",q+=" mousemove mouseup",s.mousedown=s[B],s.mousemove=s[C],s.mouseup=s[D]),H||(j.allowPanToNext=!1)}}});var Yb,Zb,$b,_b,ac,bc,cc,dc=function(b,c,d,g){Yb&&clearTimeout(Yb),_b=!0,$b=!0;var h;b.initialLayout?(h=b.initialLayout,b.initialLayout=null):h=j.getThumbBoundsFn&&j.getThumbBoundsFn(n);var i=d?j.hideAnimationDuration:j.showAnimationDuration,k=function(){bb("initialZoom"),d?(f.template.removeAttribute("style"),f.bg.removeAttribute("style")):(Ga(1),c&&(c.style.display="block"),e.addClass(a,"pswp--animated-in"),Ea("initialZoom"+(d?"OutEnd":"InEnd"))),g&&g(),_b=!1};if(!i||!h||void 0===h.x)return Ea("initialZoom"+(d?"Out":"In")),t=b.initialZoomLevel,Na(qa,b.initialPosition),Ia(),a.style.opacity=d?0:1,Ga(1),void(i?setTimeout(function(){k()},i):k());var l=function(){var c=m,g=!f.currItem.src||f.currItem.loadError||j.showHideOpacity;b.miniImg&&(b.miniImg.style.webkitBackfaceVisibility="hidden"),d||(t=h.w/b.w,qa.x=h.x,qa.y=h.y-L,f[g?"template":"bg"].style.opacity=.001,Ia()),cb("initialZoom"),d&&!c&&e.removeClass(a,"pswp--animated-in"),g&&(d?e[(c?"remove":"add")+"Class"](a,"pswp--animate_opacity"):setTimeout(function(){e.addClass(a,"pswp--animate_opacity")},30)),Yb=setTimeout(function(){if(Ea("initialZoom"+(d?"Out":"In")),d){var f=h.w/b.w,j={x:qa.x,y:qa.y},l=t,m=ka,n=function(b){1===b?(t=f,qa.x=h.x,qa.y=h.y-N):(t=(f-l)*b+l,qa.x=(h.x-j.x)*b+j.x,qa.y=(h.y-N-j.y)*b+j.y),Ia(),g?a.style.opacity=1-b:Ga(m-b*m)};c?eb("initialZoom",0,1,i,e.easing.cubic.out,n,k):(n(1),Yb=setTimeout(k,i+20))}else t=b.initialZoomLevel,Na(qa,b.initialPosition),Ia(),Ga(1),g?a.style.opacity=1:Ga(1),Yb=setTimeout(k,i+20)},d?25:90)};l()},ec={},fc=[],gc={index:0,errorMsg:'<div class="pswp__error-msg"><a href="%url%" target="_blank">The image</a> could not be loaded.</div>',forceProgressiveLoading:!1,preload:[1,1],getNumItemsFn:function(){return Zb.length}},hc=function(){return{center:{x:0,y:0},max:{x:0,y:0},min:{x:0,y:0}}},ic=function(a,b,c){var d=a.bounds;d.center.x=Math.round((ec.x-b)/2),d.center.y=Math.round((ec.y-c)/2)+a.vGap.top,d.max.x=b>ec.x?Math.round(ec.x-b):d.center.x,d.max.y=c>ec.y?Math.round(ec.y-c)+a.vGap.top:d.center.y,d.min.x=b>ec.x?0:d.center.x,d.min.y=c>ec.y?a.vGap.top:d.center.y},jc=function(a,b,c){if(a.src&&!a.loadError){var d=!c;if(d&&(a.vGap||(a.vGap={top:0,bottom:0}),Ea("parseVerticalMargin",a)),ec.x=b.x,ec.y=b.y-a.vGap.top-a.vGap.bottom,d){var e=ec.x/a.w,f=ec.y/a.h;a.fitRatio=e<f?e:f;var g=j.scaleMode;"orig"===g?c=1:"fit"===g&&(c=a.fitRatio),c>1&&(c=1),a.initialZoomLevel=c,a.bounds||(a.bounds=hc())}if(!c)return;return ic(a,a.w*c,a.h*c),d&&c===a.initialZoomLevel&&(a.initialPosition=a.bounds.center),a.bounds}return a.w=a.h=0,a.initialZoomLevel=a.fitRatio=1,a.bounds=hc(),a.initialPosition=a.bounds.center,a.bounds},kc=function(a,b,c,d,e,g){b.loadError||d&&(b.imageAppended=!0,nc(b,d,b===f.currItem&&za),c.appendChild(d),g&&setTimeout(function(){b&&b.loaded&&b.placeholder&&(b.placeholder.style.display="none",b.placeholder=null)},500))},lc=function(a){a.loading=!0,a.loaded=!1;var b=a.img=e.createEl("pswp__img","img"),c=function(){a.loading=!1,a.loaded=!0,a.loadComplete?a.loadComplete(a):a.img=null,b.onload=b.onerror=null,b=null};return b.onload=c,b.onerror=function(){a.loadError=!0,c()},b.src=a.src,b},mc=function(a,b){if(a.src&&a.loadError&&a.container)return b&&(a.container.innerHTML=""),a.container.innerHTML=j.errorMsg.replace("%url%",a.src),!0},nc=function(a,b,c){if(a.src){b||(b=a.container.lastChild);var d=c?a.w:Math.round(a.w*a.fitRatio),e=c?a.h:Math.round(a.h*a.fitRatio);a.placeholder&&!a.loaded&&(a.placeholder.style.width=d+"px",a.placeholder.style.height=e+"px"),b.style.width=d+"px",b.style.height=e+"px"}},oc=function(){if(fc.length){for(var a,b=0;b<fc.length;b++)a=fc[b],a.holder.index===a.index&&kc(a.index,a.item,a.baseDiv,a.img,!1,a.clearPlaceholder);fc=[]}};Aa("Controller",{publicMethods:{lazyLoadItem:function(a){a=Ba(a);var b=ac(a);b&&(!b.loaded&&!b.loading||y)&&(Ea("gettingData",a,b),b.src&&lc(b))},initController:function(){e.extend(j,gc,!0),f.items=Zb=c,ac=f.getItemAt,bc=j.getNumItemsFn,cc=j.loop,bc()<3&&(j.loop=!1),Da("beforeChange",function(a){var b,c=j.preload,d=null===a||a>=0,e=Math.min(c[0],bc()),g=Math.min(c[1],bc());for(b=1;b<=(d?g:e);b++)f.lazyLoadItem(n+b);for(b=1;b<=(d?e:g);b++)f.lazyLoadItem(n-b)}),Da("initialLayout",function(){f.currItem.initialLayout=j.getThumbBoundsFn&&j.getThumbBoundsFn(n)}),Da("mainScrollAnimComplete",oc),Da("initialZoomInEnd",oc),Da("destroy",function(){for(var a,b=0;b<Zb.length;b++)a=Zb[b],a.container&&(a.container=null),a.placeholder&&(a.placeholder=null),a.img&&(a.img=null),a.preloader&&(a.preloader=null),a.loadError&&(a.loaded=a.loadError=!1);fc=null})},getItemAt:function(a){return a>=0&&(void 0!==Zb[a]&&Zb[a])},allowProgressiveImg:function(){return j.forceProgressiveLoading||!H||j.mouseUsed||screen.width>1200},setContent:function(a,b){j.loop&&(b=Ba(b));var c=f.getItemAt(a.index);c&&(c.container=null);var d,g=f.getItemAt(b);if(!g)return void(a.el.innerHTML="");Ea("gettingData",b,g),a.index=b,a.item=g;var h=g.container=e.createEl("pswp__zoom-wrap");if(!g.src&&g.html&&(g.html.tagName?h.appendChild(g.html):h.innerHTML=g.html),mc(g),jc(g,ra),!g.src||g.loadError||g.loaded)g.src&&!g.loadError&&(d=e.createEl("pswp__img","img"),d.style.opacity=1,d.src=g.src,nc(g,d),kc(b,g,h,d,!0));else{if(g.loadComplete=function(c){if(k){if(a&&a.index===b){if(mc(c,!0))return c.loadComplete=c.img=null,jc(c,ra),Ja(c),void(a.index===n&&f.updateCurrZoomItem());c.imageAppended?!_b&&c.placeholder&&(c.placeholder.style.display="none",c.placeholder=null):O.transform&&(ga||_b)?fc.push({item:c,baseDiv:h,img:c.img,index:b,holder:a,clearPlaceholder:!0}):kc(b,c,h,c.img,ga||_b,!0)}c.loadComplete=null,c.img=null,Ea("imageLoadComplete",b,c)}},e.features.transform){var i="pswp__img pswp__img--placeholder";i+=g.msrc?"":" pswp__img--placeholder--blank";var l=e.createEl(i,g.msrc?"img":"");g.msrc&&(l.src=g.msrc),nc(g,l),h.appendChild(l),g.placeholder=l}g.loading||lc(g),f.allowProgressiveImg()&&(!$b&&O.transform?fc.push({item:g,baseDiv:h,img:g.img,index:b,holder:a}):kc(b,g,h,g.img,!0,!0))}$b||b!==n?Ja(g):(fa=h.style,dc(g,d||g.img)),a.el.innerHTML="",a.el.appendChild(h)},cleanSlide:function(a){a.img&&(a.img.onload=a.img.onerror=null),a.loaded=a.loading=a.img=a.imageAppended=!1}}});var pc,qc={},rc=function(a,b,c){var d=document.createEvent("CustomEvent"),e={origEvent:a,target:a.target,releasePoint:b,pointerType:c||"touch"};d.initCustomEvent("pswpTap",!0,!0,e),a.target.dispatchEvent(d)};Aa("Tap",{publicMethods:{initTap:function(){Da("firstTouchStart",f.onTapStart),Da("touchRelease",f.onTapRelease),Da("destroy",function(){qc={},pc=null})},onTapStart:function(a){a.length>1&&(clearTimeout(pc),pc=null)},onTapRelease:function(a,b){if(b&&!Z&&!X&&!ab){var c=b;if(pc&&(clearTimeout(pc),pc=null,yb(c,qc)))return void Ea("doubleTap",c);if("mouse"===b.type)return void rc(a,b,"mouse");var d=a.target.tagName.toUpperCase();if("BUTTON"===d||e.hasClass(a.target,"pswp__single-tap"))return void rc(a,b);Na(qc,c),pc=setTimeout(function(){rc(a,b),pc=null},300)}}}});var sc;Aa("DesktopZoom",{publicMethods:{initDesktopZoom:function(){M||(H?Da("mouseUsed",function(){f.setupDesktopZoom()}):f.setupDesktopZoom(!0))},setupDesktopZoom:function(b){sc={};var c="wheel mousewheel DOMMouseScroll";Da("bindEvents",function(){e.bind(a,c,f.handleMouseWheel)}),Da("unbindEvents",function(){sc&&e.unbind(a,c,f.handleMouseWheel)}),f.mouseZoomedIn=!1;var d,g=function(){f.mouseZoomedIn&&(e.removeClass(a,"pswp--zoomed-in"),f.mouseZoomedIn=!1),t<1?e.addClass(a,"pswp--zoom-allowed"):e.removeClass(a,"pswp--zoom-allowed"),h()},h=function(){d&&(e.removeClass(a,"pswp--dragging"),d=!1)};Da("resize",g),Da("afterChange",g),Da("pointerDown",function(){f.mouseZoomedIn&&(d=!0,e.addClass(a,"pswp--dragging"))}),Da("pointerUp",h),b||g()},handleMouseWheel:function(a){if(t<=f.currItem.fitRatio)return j.modal&&(!j.closeOnScroll||ab||W?a.preventDefault():F&&Math.abs(a.deltaY)>2&&(m=!0,f.close())),!0;if(a.stopPropagation(),sc.x=0,"deltaX"in a)1===a.deltaMode?(sc.x=18*a.deltaX,sc.y=18*a.deltaY):(sc.x=a.deltaX,sc.y=a.deltaY);else if("wheelDelta"in a)a.wheelDeltaX&&(sc.x=-.16*a.wheelDeltaX),a.wheelDeltaY?sc.y=-.16*a.wheelDeltaY:sc.y=-.16*a.wheelDelta;else{if(!("detail"in a))return;sc.y=a.detail}Ta(t,!0);var b=qa.x-sc.x,c=qa.y-sc.y;(j.modal||b<=ea.min.x&&b>=ea.max.x&&c<=ea.min.y&&c>=ea.max.y)&&a.preventDefault(),f.panTo(b,c)},toggleDesktopZoom:function(b){b=b||{x:ra.x/2+ta.x,y:ra.y/2+ta.y};var c=j.getDoubleTapZoom(!0,f.currItem),d=t===c;f.mouseZoomedIn=!d,f.zoomTo(d?f.currItem.initialZoomLevel:c,b,333),e[(d?"remove":"add")+"Class"](a,"pswp--zoomed-in")}}});var tc,uc,vc,wc,xc,yc,zc,Ac,Bc,Cc,Dc,Ec,Fc={history:!0},Gc=function(){return Dc.hash.substring(1)},Hc=function(){tc&&clearTimeout(tc),vc&&clearTimeout(vc)},Ic=function(){var a=Gc(),b={};if(a.length<1)return b;if(b.pid=a,j.galleryPIDs){var c=b.pid;for(b.pid=0,i=0;i<Zb.length;i++)if(Zb[i].pid===c){b.pid=i;break}}else b.pid=parseInt(b.pid,10)-1;return b.pid<0&&(b.pid=0),b},Jc=function(){if(vc&&clearTimeout(vc),ab||W)return void(vc=setTimeout(Jc,500));wc?clearTimeout(uc):wc=!0;var a=n+1,b=ac(n);b.hasOwnProperty("pid")&&(a=b.pid);var c=zc+a;Ac||Dc.hash.indexOf(c)===-1&&(Cc=!0);var d=Dc.href.split("#")[0]+"#"+c;Ec?"#"+c!==window.location.hash&&history[Ac?"replaceState":"pushState"]("",document.title,d):Ac?Dc.replace(d):Dc.hash=c,Ac=!0,uc=setTimeout(function(){wc=!1},60)};Aa("History",{publicMethods:{initHistory:function(){if(e.extend(j,Fc,!0),j.history){Dc=window.location,Cc=!1,Bc=!1,Ac=!1,zc=Gc(),Ec="pushState"in history,Da("afterChange",f.updateURL),Da("unbindEvents",function(){e.unbind(window,"hashchange",f.onHashChange)});var a=function(){yc=!0,Bc||(Cc?history.back():zc?Dc.hash=zc:Ec?history.pushState("",document.title,Dc.pathname+Dc.search):Dc.hash=""),Hc()};Da("unbindEvents",function(){m&&a()}),Da("destroy",function(){yc||a()}),Da("firstUpdate",function(){n=Ic().pid}),zc="",setTimeout(function(){k&&e.bind(window,"hashchange",f.onHashChange)},40)}},onHashChange:function(){return Gc()===zc?(Bc=!0,void f.close()):void(wc||(xc=!0,f.goTo(Ic().pid),xc=!1))},updateURL:function(){Hc(),xc||(Ac?tc=setTimeout(Jc,800):Jc())}}}),e.extend(f,fb)};return a});